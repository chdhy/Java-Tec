* [What](#what)
* [Why](#why)
* [Where](#where)
* [How](#how)
   * [å­—èŠ‚æµ](#å­—èŠ‚æµ)
   * [å­—ç¬¦æµ](#å­—ç¬¦æµ)
   * [Byte ä¸ Char](#byte-ä¸-char)
   * [ç¼–ç ä¸è§£ç ](#ç¼–ç ä¸è§£ç )
   * [å­—èŠ‚æµåˆ°å­—ç¬¦æµ](#å­—èŠ‚æµåˆ°å­—ç¬¦æµ)
* [Summary](#summary)
* [Reference](#reference)

## What

IO: input/output è¾“å…¥/è¾“å‡º



## Why

â€‹	æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦ IOï¼Ÿä¼—æ‰€å‘¨çŸ¥ï¼Œç¨‹åºæ˜¯è¿è¡Œåœ¨å†…å­˜ä¸­çš„ï¼Œè€Œç¨‹åºæ˜¯å®‰è£…åœ¨ç£ç›˜ä¸­çš„ã€‚
â€‹	ä¸ºä»€ä¹ˆç¨‹åºæ˜¯å®‰è£…åœ¨ç£ç›˜ä¸­è€Œä¸æ˜¯å†…å­˜ä¸­çš„å‘¢ï¼Ÿå› ä¸ºå†…å­˜æ˜¯"æ˜“å¤±æ€§å­˜å‚¨"ï¼Œæ–­ç”µæ•°æ®å³æ¸…ç©ºï¼Œæ˜¾ç„¶å†…å­˜æ˜¯ä¸é€‚åˆå®‰è£…ç¨‹åºçš„ã€‚

â€‹	ä¸ºä»€ä¹ˆç¨‹åºæ˜¯è¿è¡Œåœ¨å†…å­˜ä¸­è€Œä¸æ˜¯ç£ç›˜ä¸­çš„å‘¢ï¼Ÿå› ä¸ºå†…å­˜æ¯”ç£ç›˜é€Ÿåº¦å¿«å¾ˆå¤šï¼Œè¿™æ ·ç¨‹åºçš„è¿è¡Œé€Ÿåº¦ä¼šå¿«å¾ˆå¤šã€‚

â€‹	è€Œç£ç›˜åˆ°å†…å­˜ï¼Œæˆ–è€…å†…å­˜åˆ°ç£ç›˜è¿™ä¸ªè¿‡ç¨‹å°±å«åš IOï¼Œå› ä¸ºç¨‹åºè¿è¡Œåœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬ç«™åœ¨å†…å­˜çš„è§’åº¦æ¥è®²ï¼ŒæŠŠç£ç›˜æ•°æ®è¯»å…¥åˆ°å†…å­˜ä¸­ï¼Œå°±å«åš Inputï¼Œä»å†…å­˜ä¸­æŠŠæ•°æ®å†™å‡ºåˆ°ç£ç›˜ä¸­ï¼Œå°±å«åš Outputã€‚



## Where

â€‹		å“ªé‡Œä¼šç”¨åˆ° IO å‘¢ï¼Ÿå½“ç¨‹åºå¯åŠ¨æ—¶"åŠ è½½"çš„å·¥ç¨‹ï¼Œå°±ä¼šæŠŠç£ç›˜ä¸­çš„æ•°æ®ç»™ Input åˆ°å†…å­˜ä¸­ã€‚å½“éœ€è¦"è¯»å–"ç£ç›˜ä¸­çš„æ–‡ä»¶åˆ°å†…å­˜ä¸­å¤„ç†æ—¶ï¼Œä¹Ÿéœ€è¦ Inputã€‚è€Œå½“ç¨‹åºåœ¨å†…å­˜ä¸­äº§ç”Ÿäº†æ•°æ®éœ€è¦ä¿å­˜ä»¥ä¾¿ä¹‹åä½¿ç”¨æ—¶ï¼Œä¹Ÿéœ€è¦ Outputã€‚æˆ–è€…ç¨‹åºéœ€è¦ä»ç½‘ç»œä¸Šä¸‹è½½æ–‡ä»¶ï¼Œåˆ™éœ€è¦ç½‘ç»œçš„ Input å’Œæœ¬åœ°çš„ Output ç­‰ç­‰



## How

â€‹		IO çš„æ®æ•°æ®æ¥æºå¤§è‡´æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯æ¥è‡ªäºæœ¬åœ°ç£ç›˜ï¼Œæ•°æ®åœ¨ç£ç›˜çš„å”¯ä¸€æœ€å°æè¿°å°±æ˜¯æ–‡ä»¶ï¼Œæ‰€ä»¥æœ¬åœ° IO ç»•ä¸å¼€çš„å°±æ˜¯æ–‡ä»¶ï¼Œåœ¨ Java ä¸­å³æ˜¯`File`ç±»ã€‚å¦å¤–ä¸€ç§æ•°æ®æ¥è‡ªäºç½‘ç»œï¼Œç½‘ç»œæ•°æ®çš„è¯»å†™åº•å±‚æ˜¯ socketï¼Œåœ¨ Java ä¸­å³æ˜¯`Socket`ç±»ã€‚åœ¨è¿™ä¸¤ç§æ•°æ®ä¸Šéƒ½ä¼šæœ‰ IO æ“ä½œï¼ŒIO æ“ä½œåœ¨ Java ä¸­çš„åŸºç¡€æŠ½è±¡æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯`InputStream`å’Œ`OutputStream`ï¼Œä»¥åŠ `Reader` å’Œ`Writer`ï¼Œä¸¤å¥— API çš„åŒºåˆ«åœ¨äºæ˜¯ä»¥è¯»å–å­—èŠ‚ä¸ºå•ä½è¿˜æ˜¯ä»¥è¯»å–å­—ç¬¦ä¸ºå•ä½ã€‚Input å’Œ Output çš„æ“ä½œåŸºæœ¬æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œæ ¹æ®æ“ä½œçš„éœ€æ±‚å’Œæ–¹å¼çš„ä¸åŒï¼ŒInput å’Œ Output éƒ½æœ‰ä¸€å¥—ä½“åŠŸèƒ½ä½“ç³»



### å­—èŠ‚æµ

å…ˆæ¥ç„ä¸€çœ¼ Stream çš„æ¥å£é‡Œè¯»å–å’Œå†™å…¥çš„æ–¹æ³•

```java
// è¯»å–
public abstract int read() throws IOException; // è¯»å•ä¸ªå­—èŠ‚
public int read(byte b[]) throws IOException {
    return read(b, 0, b.length);
}
public int read(byte b[], int off, int len) throws IOException {
		// [å¤šæ¬¡]è°ƒç”¨ int read() æ–¹æ³•
}

// å†™å…¥
public abstract void write(int b) throws IOException;
public void write(byte b[]) throws IOException {
    write(b, 0, b.length);
}
public void write(byte b[], int off, int len) throws IOException {
		// [å¤šæ¬¡]è°ƒç”¨ write(int b) æ–¹æ³•  
}
```

å†æ¥çœ‹çœ‹ä¸¤ç§æµçš„éƒ¨åˆ†ä¸»è¦ç»§æ‰¿ä½“ç³»

![](https://raw.githubusercontent.com/chdhy/Java-Tec/master/io/resource/InputStream.png)

<center>InputStream<center/>

![](https://raw.githubusercontent.com/chdhy/Java-Tec/master/io/resource/OutputStream.png)


<center>OutputStream<center/>

å¯ä»¥çœ‹åˆ°ä¸¤è€…ä½“ç³»éå¸¸ç›¸ä¼¼ã€‚ä»¥ InputStream ä¸ºä¾‹ï¼Œä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯ FilterInputStream(æ›´åƒæ˜¯ä¸€ä¸ªMapperInputStreamï¼Œæˆ–è€… DecoratorInputStream)ï¼Œæˆ‘ç§°å…¶ä¸º**è£…é¥°æµ**ï¼Œä¸€ç±»æ˜¯åƒ FileInputStream å’Œ ByteArrayInputStream è¿™æ ·çš„ï¼Œæˆ‘ç§°å…¶ä¸º**åŸå§‹æµ**ã€‚åŸå§‹æµæ˜¯æ•°æ®çš„æœ€ç»ˆæ¥æºï¼Œè£…é¥°æµæ˜¯å¯¹åŸå§‹æµæˆ–è€…å…¶ä»–è£…é¥°æµè¿›è¡Œè£…é¥°çš„æµï¼Œä»¥è¾¾åˆ°å¢å¼ºå…¶åŠŸèƒ½æˆ–æ€§èƒ½ç­‰ç›®çš„ï¼Œ**è£…é¥°æµä¸èƒ½è„±ç¦»åŸå§‹æµè€Œå­˜åœ¨**ï¼Œè„±ç¦»åŸå§‹æµï¼Œé‚£ä¾¿æ˜¯"**æ— æ ¹ä¹‹æœ¨,æ— æºä¹‹æ°´**",å› ä¸ºæœ€ç»ˆéœ€è¦åŸå§‹æµæä¾›æ•°æ®æ¥æºã€‚è€Œ ObjectInputStream è™½ç„¶æœªç»§æ‰¿ FilterInputStreamï¼Œä½†å…¶å´æ˜¯å¯¹ InputStream çš„å¢å¼ºï¼Œå®ä¸ºè£…é¥°æµã€‚

```kotlin
fun readFromByteArray() {
    ByteArrayInputStream("hello,world".encodeToByteArray()).use {
        var read = it.read()
        while (read != -1) {
            print(read.toChar())
            read = it.read()
        }
    }
}

fun readFromFile() {
    FileInputStream("./io/byte_test.txt").use {
        val byteArray = ByteArray(1024)
        while (it.read(byteArray) != -1) {
            byteArray.toList()
    						.filter { byte -> byte >= 0 }
    						.forEach { byte -> print(byte.toChar()) }
        }
    }
}
```

<center>åŸå§‹æµ<center/>

```kotlin
// ä½¿ç”¨LineInputStreamæä¾›çš„ readLine æ–¹æ³•ä¸€æ¬¡è¯»å–ä¸€è¡Œ
fun readForLine() {
    LineInputStream(FileInputStream("./io/byte_test.txt")).use {
        var index = 0
        var line = it.readLine()
        while (line != null) {
            if (line.isBlank()) {
                println(line)
            } else {
                println("${++index}: $line") // add index for each not blank line
            }
            line = it.readLine()
        }
    }
}

// è¯»å– zip å‹ç¼©æ–‡ä»¶ä¸­çš„å†…å®¹
fun readZipFile() {
    val zipFile = ZipFile("./io/archive.zip")
    ZipInputStream(FileInputStream("./io/archive.zip")).use {
        var nextEntry = it.nextEntry
        while (nextEntry != null) {
            println("${nextEntry.name} -----------------------")
            val byteArray = ByteArray(1024)
            val inputStream = zipFile.getInputStream(nextEntry)
            while (inputStream.read(byteArray) != -1) {
                println(String(byteArray))
            }
            println()
            nextEntry = it.nextEntry
        }
    }
}
```

<center>è£…é¥°æµ<center/>

å¯ä»¥çœ‹åˆ°è£…é¥°æµå…¶å†…éƒ¨æœ€ç»ˆéœ€è¦ä¸€ä¸ªåŸå§‹æµæä¾›æ•°æ®ï¼Œç„¶åé€šè¿‡æä¾›æ–°çš„æ¥å£æˆ–è€…å†…éƒ¨æœºåˆ¶å¢å¼ºåŸå§‹æµã€‚è¿™é‡Œç‰¹åˆ«æŠŠ BufferedInputStream æ‹¿å‡ºæ¥è¯´ä¸€è¯´ï¼Œæ ¹æ®è¯¥ç±»çš„ä»‹ç»ï¼Œæ˜¯é€šè¿‡å¢åŠ å†…éƒ¨ç¼“å­˜æ¥å¢å¼ºè¯»å–æ€§èƒ½ï¼Œé‚£ç©¶ç«Ÿèƒ½æå‡å¤šå°‘æ€§èƒ½å‘¢ï¼Ÿåšä¸€ä¸ªå¯¹æ¯”ï¼š

```kotlin
fun readBufferInputStream() {
    val file = File("../../video.mp4") // about 600MB,replace to your big file

    val noBufferPerformance = performance {
        FileInputStream("../../video1.mp4").use {
            val byteArray = ByteArray(1024)
            while (it.read(byteArray) != -1) {
                // just read
            }
        }
    }
    println("noBufferPerformance: $noBufferPerformance")

    val defaultBufferPerformance = performance {
        BufferedInputStream(FileInputStream("../../video2.mp4")).use {
            val byteArray = ByteArray(1024)
            while (it.read(byteArray) != -1) {
                // just read
            }
        }
    }
    println("defaultBufferPerformance: $defaultBufferPerformance")

    val sameBufferPerformance = performance {
        BufferedInputStream(FileInputStream("../../video3.mp4"), 1024).use {
            val byteArray = ByteArray(1024)
            while (it.read(byteArray) != -1) {
                // just read
            }
        }
    }
    println("sameBufferPerformance: $sameBufferPerformance")

    val noBufferPerformance2 = performance {
        FileInputStream("../../video4.mp4").use {
            val byteArray = ByteArray(8192)
            while (it.read(byteArray) != -1) {
                // just read
            }
        }
    }
    println("noBufferPerformance2: $noBufferPerformance2")

    val bigBufferPerformance = performance {
        BufferedInputStream(FileInputStream("../../video5.mp4"), 16 * 1024 * 1024).use {
            val byteArray = ByteArray(1024)
            while (it.read(byteArray) != -1) {
                // just read
            }
        }
    }
    println("bigBufferPerformance: $bigBufferPerformance")

    val bigReadNoBufferPerformance = performance {
        FileInputStream("../../video6.mp4").use {
            val byteArray = ByteArray(16 * 1024 * 1024)
            while (it.read(byteArray) != -1) {
                // just read
            }
        }
    }
    println("bigReadNoBufferPerformance: $bigReadNoBufferPerformance")
}

// è¿è¡Œç»“æœ
noBufferPerformance: 2215
defaultBufferPerformance: 1158
sameBufferPerformance: 2153
noBufferPerformance2: 1154
bigBufferPerformance: 810
bigReadNoBufferPerformance: 803
```

é€šè¿‡åˆ†æç»“æœï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š

1. å¯¹æ¯” 1 å’Œ 3ï¼Œæ²¡æœ‰ buffer çš„æƒ…å†µï¼Œæ€§èƒ½å’Œ buffer å¤§å°æ­£å¥½å’Œè¯»å–å¤§å°ç›¸åŒæ—¶æ˜¯å·®ä¸å¤šçš„
2. å¯¹æ¯” 1 å’Œ 2ï¼Œé»˜è®¤ buffer ç¡®å®æ¯”æ²¡æœ‰ buffer æ€§èƒ½æ›´å¥½
3. å¯¹æ¯” 2 å’Œ 4ï¼Œé»˜è®¤ buffer å’Œæ²¡æœ‰ bufferï¼Œä½†è¯»å–å¤§å°ä¸º 8k(8192)æ—¶æ€§èƒ½æ˜¯å·®ä¸å¤šçš„
4. å¯¹æ¯” 2 å’Œ 5ï¼Œç¨å¤§ä¸€ç‚¹çš„ buffer æ˜¯æ¯”é»˜è®¤ buffer æ€§èƒ½ä¼šæ›´å¥½ä¸€äº›ï¼Œä½†æ˜¯æå‡ä¸å¤§
5. å¯¹æ¯” 5 å’Œ 6ï¼Œå¤§çš„ buffer å’Œå¤§çš„è¯»å–å¤§å°ç›¸åŒæ—¶æ€§èƒ½æ˜¯å·®ä¸å¤šçš„

ç”±æ­¤ï¼Œæˆ‘ä»¬åŸºæœ¬å¯ä»¥å¾—å‡ºç»“è®ºï¼Œbuffer æ˜¯æœ‰ç”¨çš„ï¼Œä½†æ˜¯æ²¡æœ‰ buffer ä¹Ÿèƒ½å®ç°ï¼ˆå¢å¤§ä¸€æ¬¡æ€§è¯»å–å¤§å°ï¼‰ï¼Œè¿™...å¥½åƒå’Œ BufferedInputStream çš„ä»‹ç»æœ‰äº›å‡ºå…¥å•Šï¼Œæ„Ÿè§‰ç¨å¾®æœ‰äº›é¸¡è‚‹äº†ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ BIS çš„å…³é”®æºç ï¼š

```kotlin
private int read1(byte[] b, int off, int len) throws IOException {
    int avail = count - pos;
    if (avail <= 0) {
        // å¦‚æœä¸€æ¬¡è¯»å–çš„é•¿åº¦å¤§äºç­‰äº buffer çš„é•¿åº¦ï¼Œé‚£å°±ç›´æ¥ç”¨è¢«è£…é¥°çš„æµç›´æ¥è¯»å–ï¼Œä¸ä½¿ç”¨ buffer
        if (len >= getBufIfOpen().length && markpos < 0) {
            return getInIfOpen().read(b, off, len);
        }
        fill();
        avail = count - pos;
        if (avail <= 0) return -1;
    }
    int cnt = (avail < len) ? avail : len;
    System.arraycopy(getBufIfOpen(), pos, b, off, cnt);
    pos += cnt;
    return cnt;
}
```

read1 æ–¹æ³•æ˜¯ read å¤šä¸ª byte æ—¶ä¼šæœ€ç»ˆè°ƒç”¨çš„æ–¹æ³•ï¼Œå…³é”®è¡Œå·²ç»æ³¨é‡Šï¼Œå½“ ä¸€æ¬¡è¯»å–é•¿åº¦>= buffer é•¿åº¦æ—¶ç›´æ¥ç»•è¿‡äº† bufferï¼Œä½¿ç”¨åŸå§‹æµè¯»å–ï¼Œè€Œ buffer é»˜è®¤çš„å¤§å°å³æ˜¯ 8192ï¼Œæ‰€ä»¥å½“æŒ‡å®š 8192 çš„ è¯»å–å¤§å°æ—¶ä½¿ç”¨çš„æ˜¯åŸå§‹æµç›´æ¥è¯»å–æ–¹å¼ï¼Œè€Œå…¶æ€§èƒ½å’Œé»˜è®¤ buffer å¤§å°çš„æ€§èƒ½æ˜¯ç›¸ä¼¼çš„ï¼Œè€Œå½“æŒ‡å®š buffer å¤§å°ä¸ºä¸€æ¬¡è¯»å–å¤§å° 1024 æ—¶ï¼Œæ€§èƒ½ä¹Ÿå’Œæ²¡æœ‰ buffer æ—¶ç›¸ä¼¼ï¼Œæ‰€ä»¥è¯»å–çš„æ€§èƒ½å…¶å®æœ€ç»ˆæ¥è‡ªå·±ä¸€æ¬¡è¯»å–çš„å¤§å°ï¼Œä¸€æ¬¡è¯»å–æ›´å¤šçš„æ•°æ®ï¼Œå¯ä»¥å‡å°‘ IO çš„æ¬¡æ•°ï¼Œå¢å¼º IO æ€§èƒ½(ä¹Ÿä¸æ˜¯è¶Šå¤§è¶Šå¥½)ï¼Œæ‰€ä»¥è¿™ä¸ª BIS å…¶å®ç”¨å¤„ä¸å¤§ ğŸ˜€



### å­—ç¬¦æµ

åŒæ ·çœ‹çœ‹ Reader å’Œ Writer çš„ä¸»è¦è¯»å†™æ–¹æ³•

```java
// è¯»
public int read() throws IOException {
    char cb[] = new char[1];
    if (read(cb, 0, 1) == -1)
        return -1;
    else
        return cb[0];
}
public int read(char cbuf[]) throws IOException {
    return read(cbuf, 0, cbuf.length);
}
abstract public int read(char cbuf[], int off, int len) throws IOException;

// å†™
public void write(int c) throws IOException {
    synchronized (lock) {
        if (writeBuffer == null){
            writeBuffer = new char[WRITE_BUFFER_SIZE];
        }
        writeBuffer[0] = (char) c;
        write(writeBuffer, 0, 1);
    }
}
public void write(char cbuf[]) throws IOException {
    write(cbuf, 0, cbuf.length);
}
abstract public void write(char cbuf[], int off, int len) throws IOException;
```

å¯ä»¥çœ‹åˆ° read å’Œ write æ–¹æ³•åŒæ ·æ˜¯é«˜åº¦å¯¹ç§°ï¼Œå¹¶ä¸”ä¸ Stream é‡Œçš„è¯»å†™æ–¹æ³•ä¹Ÿé«˜åº¦ç±»ä¼¼ï¼Œä¸»è¦åŒºåˆ«åœ¨äºè¯»å†™çš„æœ€å°å•ä½ç”± byte å˜æˆäº† charï¼Œä¹Ÿå³å­—é¢æ„æ€ï¼Œå­—èŠ‚æµä¸å­—ç¬¦æµçš„åŒºåˆ«ã€‚åŒæ ·å†æ¥çœ‹çœ‹ Reader å’Œ Writer çš„ç»§æ‰¿ä½“ç³»




![](https://raw.githubusercontent.com/chdhy/Java-Tec/master/io/resource/Reader.png)

<center>Reader<center/>




![](https://raw.githubusercontent.com/chdhy/Java-Tec/master/io/resource/Writer.png)

<center>Writer<center/>



å¿ƒç»†çš„åŒå­¦å¯èƒ½çœ‹åˆ°ä¸€ä¸ªå« InputStreamReader å’Œ OutputStreamWriter çš„ä¸œè¥¿ï¼Œéš¾é“è¿™ä¸ªå­—ç¬¦æµå’Œå­—èŠ‚æµæœ‰ä»€ä¹ˆå…³ç³»å—ï¼Ÿå…³å­æ»é”€ï¼Œå¸®å¸®ç¬”è€…ï¼å…ˆæ¥çœ‹çœ‹å…¶ä»–çš„ï¼Œè¿™ä¸ªæ—¶å€™å¿ƒç»†çš„åŒå­¦åˆæ³¨æ„åˆ°äº†ï¼ŒStream é‡Œé‡è¦çš„ Filter ç³»åˆ—åœ¨å­—ç¬¦æµå›¾é‡Œé¢æ²¡æœ‰äº†ï¼éš¾é“å­—ç¬¦æµä¸éœ€è¦è£…é¥°å—ï¼Ÿå½“ç„¶ä¸æ˜¯äº†ï¼Œåªæ˜¯å‡ºäºæœªçŸ¥çš„åŸå› ï¼Œé‚£äº›å¸¸ç”¨çš„è£…é¥°æµéƒ½æ²¡æœ‰ç»§æ‰¿ FilterReader/Writerï¼Œæ‰€ä»¥å›¾é‡Œå°±æ²¡æœ‰ä½“ç°å‡ºæ¥äº†ã€‚è¯ä¸å¤šè¯´ï¼Œå…ˆæ¥ç‚¹ä»£ç ï¼Œçœ‹çœ‹å­—ç¬¦æµæ˜¯æ€ä¹ˆå·¥ä½œçš„

```kotlin
fun readFromCharArray() {
    CharArrayReader("å¯’é›¨é€£æ±Ÿå¤œå…¥å³ï¼Œå¹³æ˜é€å®¢æ¥šå±±å­¤ã€‚\næ´›é™½è¦ªå‹å¦‚ç›¸å•ï¼Œä¸€ç‰‡å†°å¿ƒåœ¨ç‰å£ºã€‚".toCharArray()).use {
        val charArray = CharArray(1024)
        it.read(charArray)
        println(charArray.joinToString(""))
    }
}

fun readFromFile() {
    // é•¿æ¨æ­Œ
    FileReader("./io/char_test.txt").use {
        val charArray = CharArray(1024)
        it.read(charArray)
        println(charArray.joinToString(""))
    }
}
// output
/**
é•¿æ¨æ­Œ
å”:ç™½å±…æ˜“

æ±‰çš‡é‡è‰²æ€å€¾å›½,å¾¡å®‡å¤šå¹´æ±‚ä¸å¾—
æ¨å®¶æœ‰å¥³åˆé•¿æˆ,å…»åœ¨æ·±é—ºäººæœªè¯†
å¤©ç”Ÿä¸½è´¨éš¾è‡ªå¼ƒ,ä¸€æœé€‰åœ¨å›ç‹ä¾§
...
*/

fun readForLine() {
    LineNumberReader(FileReader("./io/char_test.txt")).use {
        println(it.readLine())
        println(it.readLine())
        println(it.readLines().joinToString("\n")) // read rest all lines
    }
}
```

å¯ä»¥çœ‹åˆ°ï¼Œå’Œ Stream ç”¨æ³•åŸºæœ¬ç›¸åŒï¼Œä¹Ÿéµå¾ªåŸå§‹æµå’Œè£…é¥°æµçš„è§„åˆ™ã€‚æ„Ÿè§‰ So Easyï¼å—¯ï¼Œå¯æ˜¯ï¼Œä¸ºä»€ä¹ˆè¦åˆ†å­—èŠ‚æµå’Œå­—ç¬¦æµå‘¢ï¼Ÿå­—èŠ‚æµå¯ä»¥è¯»å–å­—ç¬¦æµè¯»å–çš„æ–‡ä»¶å—ï¼Ÿåä¹‹å‘¢ï¼Ÿè®©æˆ‘ä»¬åˆ†åˆ«è¯•è¯•çœ‹

```kotlin
// ç”¨å­—èŠ‚æµè¯»å– char_test.txt
fun readFromFile2() {
    FileInputStream("./io/char_test.txt").use {
        val byteArray = ByteArray(1024)
        while (it.read(byteArray) != -1) {
            byteArray.toList()
                .filter { byte -> byte.toInt() != -1 }
                .forEach { byte -> print((byte.toInt() and 0xFF).toChar()) }
        }
    }
}

// output
/**
Ã©Â•Â¿Ã¦ÂÂ¨Ã¦Â­ÂŒ
Ã¥Â”Â:Ã§Â™Â½Ã¥Â±Â…Ã¦Â˜Â“

Ã¦Â±Â‰Ã§ÂšÂ‡Ã©Â‡ÂÃ¨Â‰Â²Ã¦Â€ÂÃ¥Â€Â¾Ã¥Â›Â½,Ã¥Â¾Â¡Ã¥Â®Â‡Ã¥Â¤ÂšÃ¥Â¹Â´Ã¦Â±Â‚Ã¤Â¸ÂÃ¥Â¾Â—
Ã¦ÂÂ¨Ã¥Â®Â¶Ã¦ÂœÂ‰Ã¥Â¥Â³Ã¥ÂˆÂÃ©Â•Â¿Ã¦ÂˆÂ,Ã¥Â…Â»Ã¥ÂœÂ¨Ã¦Â·Â±Ã©Â—ÂºÃ¤ÂºÂºÃ¦ÂœÂªÃ¨Â¯Â†
Ã¥Â¤Â©Ã§Â”ÂŸÃ¤Â¸Â½Ã¨Â´Â¨Ã©ÂšÂ¾Ã¨Â‡ÂªÃ¥Â¼Âƒ,Ã¤Â¸Â€Ã¦ÂœÂÃ©Â€Â‰Ã¥ÂœÂ¨Ã¥ÂÂ›Ã§ÂÂ‹Ã¤Â¾Â§
Ã¥Â›ÂÃ§ÂœÂ¸Ã¤Â¸Â€Ã§Â¬Â‘Ã§Â™Â¾Ã¥ÂªÂšÃ§Â”ÂŸ,Ã¥Â…Â­Ã¥Â®Â«Ã§Â²Â‰Ã©Â»Â›Ã¦Â—Â Ã©Â¢ÂœÃ¨Â‰Â²
...
*/

// ç”¨å­—ç¬¦æµè¯»å– byte_test.txt
fun readFromFile2() {
    FileReader("./io/byte_test.txt").use {
        val charArray = CharArray(1024)
        it.read(charArray)
        println(charArray.joinToString(""))
    }
}
// output
/**
So early it's still almost dark out.
I'm near the window with coffee,
and the usual early morning stuff
that passes for thought.
...
*/
```

ç”¨å­—èŠ‚æµè¯»å– char_test.txtï¼Œç¿»è½¦äº†ï¼å†æ¥çœ‹çœ‹ç”¨å­—ç¬¦æµè¯»å– byte_test.txtï¼Œgoodï¼Œå¯ä»¥æ­£å¸¸è¾“å‡ºã€‚å¥½ï¼Œé‚£æˆ‘ä»¬å°±é‡ç‚¹å…³æ³¨ä¸€ä¸‹å‰é¢çš„é—®é¢˜ï¼Œä¸‹ä¸€èŠ‚æ¥è®¨è®ºä¸€ä¸‹ä¸ºå•¥åªèƒ½æ­£å¸¸è¾“å‡ºæ ‡ç‚¹ç¬¦å·



### Byte ä¸ Char



åœ¨ Java ä¸­ï¼Œé™¤å¼€è¡¨ç¤ºé€»è¾‘å€¼çš„ boolean ä»¥å¤–ï¼Œbyte æ˜¯å€¼èŒƒå›´æœ€å°çš„ç±»å‹ï¼Œ8 ä½ bitï¼Œè€Œ bit æ˜¯è®¡ç®—æœºå­˜å‚¨çš„æœ€å°å•å…ƒäº†ï¼Œå°±æ˜¯æˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„è®¡ç®—æœºæœ€ç»ˆçš„å­˜å‚¨äºŒè¿›åˆ¶çš„ 0 å’Œ 1ã€‚char æ˜¯ 16 ä½ï¼Œå³ä¸ºä¸¤ä¸ª byte çš„é•¿åº¦ï¼Œè¿™äº›éƒ½æ˜¯åœ¨å†…å­˜ä¸­çš„è¡¨ç¤ºã€‚åœ¨æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ç”¨å­—èŠ‚ï¼ŒMBï¼ŒGB ç­‰è¡¨ç¤ºæ–‡ä»¶å†…å®¹çš„å¤§å°ï¼Œå­—èŠ‚å¯ä»¥å’Œ MBï¼ŒGB ç­‰è¿›è¡Œæ¢ç®—ã€‚è¿™é‡Œçš„å­—èŠ‚å’Œ Java ä¸­çš„ byte æ˜¯å¯¹åº”çš„æ¦‚å¿µï¼Œè¡¨ç¤ºçš„å¤§å°ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ 8bitã€‚



æˆ‘ä»¬å›åˆ°ä¸Šé¢çš„é—®é¢˜ï¼Œç”¨å­—èŠ‚æµè¯» char_test.txtä¼šå‡ºç°å¼‚å¸¸ï¼Œç”¨å­—ç¬¦æµè¯»å– byte_test.txtåˆ™æ²¡æœ‰é—®é¢˜ï¼Œå‡ºç°é—®é¢˜çš„æ˜¯"**ä»¥å°è¯»å¤§**",è¿™è²Œä¼¼å’Œ byte ä¸ char çš„å®¹é‡å¤§å°æœ‰å…³ç³»ã€‚æˆ‘ä»¬çŸ¥é“ byte æ˜¯ 8bit çš„ï¼Œå¯ä»¥å­˜å‚¨ 2 çš„ 8 æ¬¡æ–¹å³ 258 ä¸ªä¸åŒçš„å€¼ï¼Œç„¶å...æ¡¥è±†éº»è¢‹ï¼Œ256ï¼Œæˆ‘ä»¬çš„å¸¸ç”¨æ±‰å­—éƒ½æœ‰å‡ åƒä¸ªï¼Œ256 ä¸å¤Ÿè£…å•Šï¼è¦æ€ä¹ˆèƒ½è£…ä¸‹æ›´å¤šçš„å­—ç¬¦å‘¢ï¼Ÿåˆ...åˆä½“!~~æ‚Ÿå¤©å…‹æ–¯~~ Char!æˆ‘ä»¬ç”¨ä¸¤ä¸ª byte åˆèµ·æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½å¤Ÿè¡¨ç¤º 2 çš„ 16 æ¬¡æ–¹å³ 65536 ä¸ªä¸åŒçš„å€¼,è¿™æ ·æˆ‘ä»¬çš„æ±‰å­—å°±èƒ½è¢«è£…ä¸‹äº†ã€‚OKï¼Œå¤§æ¦‚æ˜ç™½äº†ï¼Œæˆ‘ç”¨å°çš„ byte å»è£…æœ¬æ¥åº”è¯¥ä¸¤ä¸ªè¿åœ¨ä¸€èµ·è¯»çš„ bytesï¼Œé‚£æ„æ€è‚¯å®šè¢«æ‰­æ›²äº†ï¼Œå‡ºé”™æ˜¯è‚¯å®šçš„ã€‚è®©æˆ‘ä»¬ç›´æ¥æ‰“å°è¯»å‡ºæ¥çš„åŸå§‹ byte çœ‹çœ‹

```kotlin
fun readFromFile3() {
    FileInputStream("./io/char_test.txt").use {
        val byteArray = ByteArray(1024)
        while (it.read(byteArray) != -1) {
            byteArray.toList()
                .filter { byte -> byte.toInt() != -1 }
                .forEach { byte -> print("${byte.toInt() and 0xFF} ") } // è½¬æ¢æˆæ— æ­£è´Ÿå€¼çš„byteå€¼å¤§å°
        }
    }
}

// output 
233 149 191 230 129 168 230 173 140 10 229 148 144 58 231 153 189 229 177 133 230 152 147 10 10 230 177 137 231 154 135 233 135 141 232 137 178 230 128 157 229 128 190 229 155 189 44 229  ...
```

å€¼éƒ½æŒºå¤§çš„ï¼Œå¾ˆå¤šå¤§äº 128 çš„ï¼Œå°äº 128 çš„åªæœ‰ 58ï¼Œ10ï¼Œ44 ä¸‰ä¸ªå€¼ï¼Œè¿™ä¸‰ä¸ªå€¼å¯¹åº”çš„ ASCII è¡¨é‡Œçš„å†’å·ï¼Œæ¢è¡Œå’Œé€—å·ã€‚æˆ‘ä»¬çŸ¥é“ ASCII åªæœ‰ 128 ä¸ªå­—ç¬¦ï¼Œè¶…å‡ºè¿™ä¸ªè¡¨çš„ ASCII å°±æ— èƒ½ä¸ºåŠ›äº†ï¼Œé‚£è¶…å‡ºçš„éƒ¨åˆ†æ€ä¹ˆè¡¨ç¤ºå‘¢ï¼Ÿå…¶å®è¿˜æœ‰ä¸€ä¸ª**ISO 8859-1**ç è¡¨ï¼Œä¸»è¦æ˜¯ä¸€äº›è¥¿æ¬§çš„å­—ç¬¦ï¼Œå…¶èŒƒå›´ä¸º 128-255ï¼Œæ‰€ä»¥æ‰“å°å‡ºæ¥çš„ä¹±ç å°±éƒ½è½åœ¨äº†è¿™ä¸ªç è¡¨ï¼Œæ‰“å°å‡ºæ¥çš„ç¬¬ä¸€ä¸ªæ•°å­—æ˜¯ 233ï¼Œåœ¨è¿™ä¸ªç è¡¨ä¸­å¯¹åº”çš„å°±æ˜¯æ‰“å°å‡ºæ¥çš„ç¬¬ä¸€ä¸ªå­—ç¬¦`Ã©`ï¼Œç»“æ¡ˆï¼è€Œä¸ºä»€ä¹ˆå­—ç¬¦æµå¯ä»¥æ­£ç¡®æ‰“å°å‡º byte_test.txt ä¸­çš„å†…å®¹å‘¢ï¼Œå› ä¸º byte_test.txt ä¸­çš„å­—ç¬¦éƒ½æ˜¯è½åœ¨ ASCII ç è¡¨ä¸­çš„ï¼Œæœ¬æ¥å°±æ˜¯ä¸€ä¸ªå­—èŠ‚å¯¹åº”æ–‡ä»¶ä¸­çš„ä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥ç”¨ char å»è¯»å– byte å¹¶ä¸ä¼šå¯¼è‡´ byte çš„ä¿¡æ¯ä¸¢å¤±ï¼Œè¿™å°±æ˜¯èƒ½æ­£ç¡®æ‰“å°å‡ºå†…å®¹çš„åŸå› ã€‚



ä¸Šé¢å¤§å®¶çŸ¥é“äº†æˆ‘ä»¬å¯ä»¥é€šè¿‡**"ç»„åˆå¤šä¸ªbyte"**æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦çš„æ–¹å¼å¢åŠ å¯å±•ç¤ºçš„å­—ç¬¦èŒƒå›´ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½å±•ç¤ºå‡ºä¸­æ–‡æ±‰å­—äº†ã€‚ä¸Šé¢æ‰“å°å‡ºçš„ä¹±ç ä¸­ï¼ŒåŸæœ¬çš„"é•¿æ¨æ­Œ"ä¸‰ä¸ªä¸­æ–‡æ±‰å­—è¢«è¾“å‡ºä¸ºäº† 9 ä¸ªå­—ç¬¦(åŒ…æ‹¬æœªèƒ½æ‰“å°å‡ºæ¥çš„ç©ºæ ¼ç­‰),å¯ä¸Šé¢ä¸æ˜¯è¯´äº†æ˜¯ä¸€ä¸ª Char å¯¹åº”ä¸¤ä¸ª byte å—ï¼Œä¸ºä»€ä¹ˆä¼šè¾“å‡ºä¸‰ä¸ªå­—ç¬¦å‘¢ï¼Ÿ



### ç¼–ç ä¸è§£ç 



æœ€å¼€å§‹çš„æ—¶å€™ï¼Œåªæœ‰ç¾å›½äººä½¿ç”¨è®¡ç®—æœºï¼Œä»–ä»¬ä½¿ç”¨è®¡ç®—æœºéœ€è¦æŠŠä»–ä»¬è¦ç”¨åˆ°çš„å­—ç¬¦ç”¨è®¡ç®—æœºè¡¨è¾¾å‡ºæ¥ï¼Œæ‰€ä»¥å°±æœ‰äº† ASCII ç è¡¨ï¼Œé‡Œé¢åŒ…å«ä¸€äº›å¸¸è§çš„æ§åˆ¶å­—ç¬¦ï¼Œæ•°å­—ï¼Œæ ‡ç‚¹ï¼Œå¤§å°å†™å­—æ¯ï¼Œä¸€å…± 128 ä¸ªï¼Œç”¨ä¸€ä¸ª byte å°±èƒ½è¡¨ç¤º (0x01111111)ã€‚åæ¥è®¡ç®—æœºå‘å±•åˆ°æ¬§æ´²ï¼ŒåŸæ¥çš„ ASCII è¡¨å¹¶ä¸èƒ½å®Œå…¨æ»¡è¶³ä»–ä»¬çš„éœ€æ±‚ï¼Œäºæ˜¯ä»–ä»¬å°±å¢åŠ äº† ISO 8859-1 ç è¡¨ï¼Œå¢åŠ äº†ä¸€äº›æ§åˆ¶ç¬¦ï¼Œè¥¿æ¬§å­—æ¯å’Œç¬¦å·ï¼Œå¹¶å…¼å®¹äº† ASCII ç è¡¨ï¼ŒåŠ ä¸Š ASCII çš„å­—ç¬¦ä¹Ÿèƒ½ç”¨ä¸€ä¸ª byte è¡¨ç¤º (0x11111111)ã€‚



åæ¥è®¡ç®—æœºé€æ¸å‘å±•åˆ°ä¸–ç•Œå„åœ°ï¼Œæ‹¿ä¸­å›½å¤§é™†æ¥è¯´ï¼Œå°±å‘å±•å‡ºäº†ä¸€ç³»åˆ—çš„ GB æ ‡å‡†ï¼Œå°æ¹¾æœ‰ Big5 ç­‰ï¼Œæ—¥æœ¬æœ‰ Shift_JIS ç­‰ç­‰ï¼Œå› ä¸ºå‰é¢çš„ä¸¤ç§ç è¡¨å·²ç»å æ»¡äº†ä¸€ä¸ª byte çš„å®¹é‡ï¼Œæ‰€ä»¥åé¢çš„ç¼–ç éƒ½å¾—ä½¿ç”¨æ›´å¤šçš„ byte æ¥è¡¨ç¤ºä¸€ä¸ªç¬¦å·ï¼Œäºæ˜¯å¤§é™†çš„ GB ç³»åˆ—å°±ç”¨ä¸¤ä¸ªå­—èŠ‚çš„ç¼–ç æ¥è¡¨ç¤ºæ›´å¤šçš„ç®€ä½“æ±‰å­—ï¼Œå°æ¹¾çš„ Big5 å°±ç”¨æ¥è¡¨è¾¾ç¹ä½“æ±‰å­—ï¼Œæ—¥æœ¬çš„å°±ç”¨æ¥è¡¨ç¤ºä¸€äº›å¹³å‡åï¼Œç‰‡å‡åå’Œä¸€äº›ç¬¦å·ç­‰ã€‚è¿™äº›æ ‡å‡†çš„åˆ¶å®šå¹¶æ²¡æœ‰è€ƒè™‘å…¶ä»–åœ°åŒºçš„æ ‡å‡†ï¼Œäºæ˜¯ä¸å¯é¿å…çš„ï¼ŒåŒæ ·çš„ä¸¤ä¸ªå­—èŠ‚åˆèµ·æ¥æ‰€è¡¨è¾¾çš„å­—ç¬¦ï¼Œåœ¨ä¸åŒçš„æ ‡å‡†è§£é‡Šå‡ºæ¥æ˜¯ä¸åŒçš„å­—ç¬¦ï¼Œæ‰€ä»¥å¦‚æœç”¨æ—¥æ–‡çš„ç¼–ç å†™å…¥çš„å­—ç¬¦(åŒå­—èŠ‚)å¦‚æœç”¨ä¸­æ–‡çš„ç¼–ç æ¥è§£é‡Šï¼Œé‚£å°±ä¼šå‡ºç°ä¹±ç ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ—©å…ˆæˆ‘ä»¬ç©~~å·¥å£~~æ—¥æ–‡æ¸¸æˆçš„æ—¶å€™å¤šä¼šä¹±ç çš„åŸå› ï¼Œå› ä¸º**ç¼–ç è§„åˆ™å’Œè§£ç è§„åˆ™ä¸åŒ¹é…**ï¼Œç­‰äºé¸¡åŒé¸­è®²ã€‚



è®¡ç®—æœºç»§ç»­å¾€åå‘å±•ï¼Œæ›´å¤šçš„ä¸å¸¸è§çš„å­—ç¬¦ä¹Ÿè¢«ç¼–ç è¿›æ¥äº†ï¼Œæ¯”å¦‚ä» GB2312 åˆ° GBK åˆ°GB18030ï¼Œæ±‰å­—é€æ¸å¢åŠ åˆ°äº† 70,244 ä¸ªï¼Œä¸€ä¸ª Char æœ€å¤§çš„è¡¨ç¤ºèŒƒå›´æ˜¯ 65536 ä¸ªï¼Œè¿™ä¸ª,  æ‰€ä»¥ä¸€ä¸ª Char å°±å·²ç»è£…ä¸ä¸‹äº†ï¼Œåˆè¦æ‰©å®¹äº†ï¼Œä¸€ä¸ª Char(ä¸¤ä¸ªå­—èŠ‚) å˜ä¸ºä¸¤ä¸ª Char(å››ä¸ªå­—èŠ‚) çš„èŒƒå›´ã€‚OKï¼Œ**å®¹é‡å±æœº**è§£å†³äº†ï¼ä¸ºäº†èƒ½å¤Ÿè¡¨ç¤ºæ›´å¤šçš„å­—ç¬¦ï¼Œæˆ‘ä»¬å°±ç»Ÿä¸€ä½¿ç”¨ GB18030 ç¼–ç æ¥å­˜å‚¨å†…å®¹å¥½äº†ã€‚ä½†æ˜¯è§£å†³äº†è¡¨ç¤ºé—®é¢˜åï¼Œæˆ‘ä»¬å‘ç°ï¼ŒåŸæ¥ä¸€ä¸ª Char å°±èƒ½è¡¨ç¤ºçš„å­—ç¬¦ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ä¸¤ä¸ª Char æ¥è¡¨ç¤ºäº†ï¼Œæ–‡ä»¶å¤§å°ç›´æ¥åŠ å€ï¼Œå½“æ–‡ä»¶éœ€è¦ä¼ è¾“æ—¶å¤§å°ä¹Ÿæ˜¯ç›´æ¥åŠ å€ï¼Œç”šè‡³æ˜¯ 4 å€ã€‚godï¼Œè¿™ä¸ªæˆæœ¬éš¾ä»¥æ¥å—ï¼ä½†æ˜¯æˆ‘ä»¬éœ€è¦è¿™ä¹ˆè¡¨ç¤ºè¿™ä¹ˆå¤šä¸œè¥¿å•Šï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿ



ä¸Šé¢çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä»ç¼–ç æ–¹å¼ä¸Šä¸‹æ‰‹ã€‚å¯¹äºèƒ½ç”¨ä¸€ä¸ª Char(65536) èƒ½è¡¨ç¤ºçš„å­—ç¬¦ï¼Œæˆ‘ä»¬å°±ç”¨ä¸€ä¸ª Char(ä¸¤ä¸ªå­—èŠ‚) è¡¨ç¤ºï¼Œå¯¹äºè¶…å‡ºè¿™éƒ¨åˆ†èŒƒå›´çš„ï¼Œæˆ‘ä»¬å°±ç”¨ä¸¤ä¸ª Char æ¥è¡¨ç¤ºï¼Œè¿™æ ·ä¸å°±å¯ä»¥èŠ‚çœç©ºé—´äº†å—ï¼Œæ¯•ç«Ÿå¸¸ç”¨çš„å­—ç¬¦éƒ½é å‰ï¼Œå¤§å¤šå¯ä»¥ç›´æ¥ç”¨ä¸€ä¸ª Char è¡¨ç¤ºå‡ºæ¥ã€‚è¿™å…¶å®å°±å«åš**å¯å˜é•¿ç¼–ç **ï¼Œå¯¹åº”å‰é¢çš„ ASCIIï¼ŒGBK ç­‰ç¼–ç æ–¹å¼ï¼Œæ— è®ºä¸€ä¸ª byte è¿˜æ˜¯ä¸¤ä¸ª byteï¼Œéƒ½å«åšå®šé•¿ç¼–ç ã€‚é€šè¿‡ä½¿ç”¨å¯å˜é•¿ç¼–ç çš„æ–¹å¼ï¼Œæˆ‘ä»¬åˆè§£å†³ç¼–ç è¿‡é•¿çš„é—®é¢˜ï¼



éšç€äº’è”ç½‘çš„å‘å±•ï¼Œå„ä¸ªå›½å®¶çš„ç½‘ç»œéƒ½é€æ¸è¿åˆ°äº†ä¸€èµ·ï¼Œå„ä¸ªå›½å®¶ä¹‹é—´çš„ç½‘ç»œéƒ½å¯ä»¥**å®Œå…¨è‡ªç”±**ï¼Ÿï¼Ÿï¼Ÿçš„äº’è”äº’é€šã€‚è¿™æ—¶å€™ï¼Œç¼–ç ä¸å…¼å®¹çš„é—®é¢˜å°±æ˜¾å¾—è¶Šå‘çªå‡ºäº†ï¼Œå› ä¸ºæˆ‘ä»¬é€šå¸¸éƒ½æ˜¯ç›´æ¥ä½¿ç”¨æˆ‘ä»¬å›½å®¶å†…éƒ¨çš„ç¼–ç æ ¼å¼å’Œç è¡¨ï¼Œè€Œä¸ä¼šåŠ¨æ€åœ°ä¸ºä¸åŒåœ°åŒºçš„æ–‡ä»¶é‡‡ç”¨ä¸åŒçš„ç¼–ç ã€‚è¿™ä¸ªæ—¶å€™ä¸€ä¸ªå…¨çƒç»Ÿä¸€çš„ç¼–ç æ–¹å¼å’Œç è¡¨å°±å‘¼ä¹‹æ¬²å‡ºäº†ï¼Œ[Unicode](https://zh.wikipedia.org/wiki/Unicode)è¯ç”Ÿäº†ï¼ŒUnicode åˆç§° **ä¸‡å›½ç **ã€**å›½é™…ç **ã€**ç»Ÿä¸€ç **ã€**å•ä¸€ç **ã€‚è§åçŸ¥ä¹‰ï¼Œè¿™æ˜¯ä¸€ä¸ªèåˆå…¨çƒæ‰€æœ‰å·²çŸ¥å­—ç¬¦çš„ç¼–ç ï¼Œå„ä¸ªå›½å®¶ç›´æ¥ä½¿ç”¨è¿™ä¸€å¥—ç è¡¨ï¼Œå°±å¯ä»¥ä¸ç”¨æ‹…å¿ƒç è¡¨ä¸å…¼å®¹çš„é—®é¢˜äº†ã€‚



ç è¡¨å˜äº†ï¼Œåªæ˜¯ç¼–ç å’Œè§£ç å¯¹åº”çš„"è¯å…¸"å‘ç”Ÿäº†å˜åŒ–ï¼Œä¸è¶³ä»¥å®Œå…¨è§£å†³é—®é¢˜ï¼Œé…å¥—çš„ç¼–è§£ç æ–¹å¼ä¹Ÿè¦ç»Ÿä¸€ï¼Œè¿™æ ·åœ¨è¯å…¸å’Œç¼–è§£ç çš„æ–¹å¼ä¸Šå°±å®Œå…¨ç»Ÿä¸€äº†ï¼Œä¹Ÿå°±ä¸ä¼šæœ‰ä¹±ç çš„é—®é¢˜äº†ã€‚åŸºäº Unicode ç è¡¨çš„ç¼–ç æ–¹å¼æœ‰UFT-8,UFT-16,UFT-32 ç­‰ã€‚è€Œæˆ‘ä»¬ç³»ç»Ÿä¸­åŸºæœ¬ä½¿ç”¨ UTF-8 ä½œä¸ºé»˜è®¤æ–¹å¼ï¼ŒåŸºäº Unicode ç è¡¨ï¼Œå…·æœ‰å…¨çƒç»Ÿä¸€ç¼–ç ï¼Œå¯å˜é•¿ç¼–ç èŠ‚çœç©ºé—´ï¼Œæ‰€ä»¥æˆä¸ºäº†æœ€æµè¡Œçš„ç¼–ç æ–¹å¼ã€‚è¿™é‡Œä»‹ç»ä¸€ä¸‹ UTF-8 çš„ç¼–ç è§„åˆ™ï¼š

1. å•å­—èŠ‚çš„ç¬¦å·æœ€é«˜æœ‰æ•ˆä½ 0,å³å•å­—èŠ‚æœ€é«˜å¯è¡¨ç¤ºèŒƒå›´æ˜¯ 0x01111111ï¼Œ127ï¼ŒåŠ ä¸Š 0ï¼Œä¸º 128 ä¸ªå­—ç¬¦ï¼Œè¦†ç›– ASCII ç è¡¨

2. å¤šå­—èŠ‚çš„ç¬¦å·æ ¹æ®å­—èŠ‚çš„æ•°é‡ç¼–ç æ–¹å¼æœ‰æ‰€ä¸åŒï¼Œè§„åˆ™ä¸ºï¼Œå¤šå­—èŠ‚å­—ç¬¦é¦–å­—èŠ‚çš„å‰ç¼€ä¸ºå­—èŠ‚ä¸ªæ•°çš„ 1 å’Œä¸€ä¸ª 0 ç»„æˆï¼Œä¾‹å¦‚æœ‰ä¸‰ä¸ªå­—èŠ‚çš„å­—ç¬¦ï¼Œé¦–å­—èŠ‚çš„å‰ç¼€ä¸º 1110ï¼Œè¿˜å‰©ä¸‹ 4 ä¸ª bit ä¸ºæœ‰æ•ˆå†…å®¹ç¼–ç ï¼Œå¤šå­—èŠ‚çš„åç»­å­—èŠ‚éƒ½ä»¥ 10 å¼€å¤´(ä¸éšæœºè¯»å†™æ—¶çš„å•å­—èŠ‚åšåŒºåˆ†)ï¼Œå³åç»­å­—èŠ‚çš„æœ‰æ•ˆå†…å®¹ä¸º 6bit


æ‰€ä»¥ç†è®ºä¸ŠåŒå­—èŠ‚çš„ UTF-8 ç¼–ç æœ‰æ•ˆå®¹é‡ä¸º 2 çš„ (16 - 3(110) - 2(10)) = 11 æ¬¡æ–¹ï¼Œ2048 ä¸ªå­—ç¬¦ï¼Œä¸‰ä¸ªå­—èŠ‚çš„æœ‰æ•ˆå®¹é‡ä¸º 65536 ä¸ªå­—ç¬¦ï¼Œå››ä¸ªå­—èŠ‚ä¸º 2097152ã€‚æˆ‘ä»¬å¸¸ç”¨çš„æ±‰å­—éƒ½è½åœ¨ 2048 åˆ° 65536 çš„èŒƒå›´å†…ï¼Œæ‰€ä»¥è™½ç„¶æ˜¯å¯å˜é•¿ç¼–ç ï¼Œä½†æ˜¯æ±‰å­—åŸºæœ¬ä¸Šéƒ½ä¼šè¢«ç¼–ç ä¸º 3 ä¸ªå­—èŠ‚,è¿™å°±æ˜¯"é•¿æ¨æ­Œ"ä¸‰ä¸ªå­—è¢«ç¼–ç ä¸º 9 ä¸ª byte çš„åŸå› ï¼Œè€Œå¤šå­—èŠ‚å­—ç¬¦è‡³å°‘æ˜¯ 10 å¼€å¤´çš„ byteï¼Œæ‰€ä»¥éƒ½å¤§äº 128ï¼Œè¿™å°±æ˜¯æœ€ç»ˆè¿™ä¹ˆå¤šçš„æ±‰å­—è¢«ç¼–ç å¹¶æ‹†åˆ†åéƒ½è½åœ¨  ISO 8859-1 è¡¨çš„åŸå› 



æé—®ã€‚char_test.txt æ–‡ä»¶å¤§å°ä¸ºå¤šå¤§ï¼Ÿé•¿æ¨æ­Œå…¨æ–‡ 840 å­—ï¼Œæ ‡é¢˜å’Œä½œè€…å 7 ä¸ªå­—ï¼Œå’Œä¸€äº›ç¬¦å·ï¼Œï¼ˆ840 + 7ï¼‰* 3 + 60  + 60 + 3 = 2664 å­—èŠ‚ï¼ˆå¯ä½¿ç”¨ ls -l char_test.txtå‘½ä»¤æŸ¥çœ‹ï¼‰ã€‚è¦ä¸€æ¬¡å…¨éƒ¨è¯»åˆ°å†…å­˜ä¸­ï¼Œéœ€è¦å¤šå°‘å†…å­˜ï¼Ÿå› ä¸ºå­—èŠ‚æ˜¯ç›¸äº’å¯¹åº”çš„ï¼Œæ‰€ä»¥å¦‚æœæ˜¯å­—èŠ‚æµéœ€è¦ 2664 ä¸ªå­—èŠ‚ï¼Œå­—ç¬¦æµåˆ™ä¸º 2664/2 = 1332 ä¸ªcharã€‚æœ‰äº›å¥‡æ€ªâ“â“â“å®é™…ä¸Šåº”è¯¥æ˜¯ï¼ˆ840 + 7ï¼‰ + 60 + 60 + 3 = 970 å•Šï¼ä¸ºå•¥æ¢ç®—å‡ºæ¥æ˜¯ 1332ï¼Œå“ªé‡Œå‡ºäº†é—®é¢˜ï¼Ÿæˆ‘ä»¬æ¥çœ‹çœ‹ï¼š

```kotlin
fun readForLine2() {
    LineInputStream(FileInputStream("./io/char_test.txt")).use {
        var lineNumber = 0
        var byteNumber = 0

        var line = it.readLine()
        while (line != null) {
            lineNumber++
            byteNumber += line.length
            line = it.readLine()
        }

        println("lineNumberï¼š$lineNumber")
        println("byteNumberï¼š$byteNumber")
        println("realByteNumberï¼š${byteNumber + lineNumber - 1}") // è¯»è¡Œä¼šå»æ‰æ¢è¡Œç¬¦ï¼Œéœ€è¦åŠ å›å»ï¼Œæœ€åä¸€è¡Œæ²¡æœ‰æ¢è¡Œç¬¦ï¼Œéœ€è¦å‡ä¸€ä¸ª
    }

    LineNumberReader(FileReader("./io/char_test.txt")).use {
        val allString = it.readLines().joinToString("\n")
        println("charNumber:${allString.toCharArray().size}")
    }
}
// output
lineNumberï¼š63
byteNumberï¼š2602
realByteNumberï¼š2664
charNumber:970
```

å­—èŠ‚æµ 2664ï¼Œå’Œè®¡ç®—å»åˆï¼Œå­—ç¬¦æµæ˜¯ç¡®å®æ˜¯ 970ï¼Œä¸ºå•¥è®¡ç®—å‡ºæ¥æ˜¯ 1332 å‘¢ï¼Ÿå› ä¸ºè®¡ç®—ç®—çš„æ˜¯å­—ç¬¦æµç›´æ¥æ‹¼æ¥æˆå­—ç¬¦æµçš„ä¸ªæ•°ï¼Œæ¯”å¦‚ä¸€ä¸ªæ±‰å­—è¢«ç¼–ç æˆ 3 ä¸ªå­—èŠ‚åï¼Œç›´æ¥æŠ˜ç®—åæ˜¯ä¸€ä¸ªåŠçš„ Charï¼Œæ€ªæ€ªçš„å“ˆï¼Œæ˜æ˜ä¸€ä¸ªæ±‰å­—å°±æ˜¯ä¸€ä¸ª Char å¯ä»¥è¡¨ç¤ºçš„å˜›ã€‚æ²¡é”™ï¼Œç¡®å®ä¸€ä¸ªæ±‰å­—å¯ä»¥ç”±ä¸€ä¸ª Char è¡¨ç¤ºï¼Œä½†æ˜¯å­˜å‚¨çš„ç¡®å®ä¹Ÿæ˜¯ä¸‰ä¸ªå­—èŠ‚ï¼Œ"å­˜å‚¨"åˆ°"è¡¨ç¤º"æ˜¯éœ€è¦**è§£ç **çš„ï¼Œä¸‰ä¸ªbyte çš„å­—ç¬¦æœ‰æ•ˆè¡¨ç¤ºå®¹é‡ä¸º 2 çš„ 16 æ¬¡æ–¹ï¼Œå³ 65536ï¼Œæ°å¥½æ˜¯ä¸€ä¸ª Char çš„å®¹é‡ï¼Œæ‰€ä»¥è§£ç å°±æ˜¯æŠŠå­˜å‚¨çš„ byte ä¸­çš„æœ‰æ•ˆè¡¨ç¤ºä½ç»™æå–å‡ºæ¥ï¼Œè½¬æ¢æˆä¸€ä¸ª Char çš„è¿‡ç¨‹ã€‚æ¯”å¦‚ "é•¿" å­—,ä¸‰ä¸ªæ— ç¬¦å·çš„ byte å€¼åˆ†åˆ«æ˜¯ 233 149 191ï¼Œè½¬æ¢æˆäºŒè¿›åˆ¶å°±æ˜¯ 1110 **1001**ï¼Œ10**01 0101**ï¼Œ10**11 1111**ã€‚æˆ‘ä»¬å»æ‰æ ‡è¯†ä½åå¹¶æ‹¼æ¥åœ¨ä¸€èµ·çš„äºŒè¿›åˆ¶æ˜¯ 1001 0101 0111 1111,è¿™å°±æ°å¥½æ˜¯ä¸€ä¸ª char çš„å®¹é‡ï¼Œè½¬æ¢æˆ 10 è¿›åˆ¶å°±æ˜¯ 38271ï¼ŒæŸ¥æ‰¾ä¸€ä¸‹ [Unicodeè¡¨](https://unicode-table.com/cn/) 38271 å¯¹åº”çš„ç¼–ç å³ä¸º"é•¿"å­—ã€‚



### å­—èŠ‚æµåˆ°å­—ç¬¦æµ

æˆ‘ä»¬çŸ¥é“äº†å­—ç¬¦å…¶å®ä¹Ÿæ˜¯å­—èŠ‚è§£ç è¿‡å»çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„åº•å±‚è¯»å–å•ä½ä¸€å®šæ˜¯å­—èŠ‚ï¼Œè€Œä¸æ˜¯å­—ç¬¦ã€‚è€Œå­—ç¬¦æµç³»åˆ—çš„æ¥å£éƒ½æ˜¯ç›´æ¥è¯»å–çš„å­—ç¬¦ï¼Œæ‰€ä»¥å…¶å†…éƒ¨ä¸€å®šæœ‰è¿™æ ·çš„è§£ç è¿‡ç¨‹ã€‚å‰é¢æˆ‘ä»¬æåˆ°äº† InputStreamReaderï¼Œåå­—å³åŒ…å« Streamï¼Œä¹Ÿæœ‰ Reader ï¼Œçœ‹èµ·æ¥åº”è¯¥æ˜¯å…³é”®ã€‚æ¥çœ‹çœ‹ InputStreamReader çš„ä¸€äº›é‡è¦çš„ä»£ç 

```java
private final StreamDecoder sd;

// æ„é€ æ–¹æ³•
public InputStreamReader(InputStream in) {
    super(in);
    try {
        sd = StreamDecoder.forInputStreamReader(in, this, (String)null); // ## check lock object
    } catch (UnsupportedEncodingException e) {
        // The default encoding should always be available
        throw new Error(e);
    }
}

// read æ–¹æ³•
public int read() throws IOException {
    return sd.read();
}

public int read(char cbuf[], int offset, int length) throws IOException {
    return sd.read(cbuf, offset, length);
}
```

æ„é€ æ–¹æ³•æœ‰å¤šä¸ªï¼Œéƒ½éœ€è¦ä¼ å…¥ InputStreamï¼Œå—¯ï¼Œå¯¹äº†ï¼å…¶ä»–å‡ ä¸ªæ„é€ æ–¹æ³•éœ€è¦ä¼ å…¥ä¸ Charset ç›¸å…³çš„å‚æ•°ï¼Œéƒ½ä¼šè¢«ç”¨æ¥æ„é€  StreamDecoderã€‚çœ‹ read æ–¹æ³•çš„å®ç°ï¼ŒçœŸæ­£åšäº‹çš„åº”è¯¥å°±æ˜¯è¿™ä¸ª StreamDecoder äº†ã€‚ç»§ç»­å¾€ä¸‹è·Ÿ StreamDecoder.read(char cbuf[])->read(char cbuf[], int offset, int length) -> int implRead(char[] cbuf, int off, int end) ï¼Œè¿™é‡Œçœ‹ä¸‹

```java
private CharsetDecoder decoder;
private ByteBuffer bb; // byte arrayï¼Œç”¨æ¥è£…ä»streamè¯»å–çš„æ•°æ®
private InputStream in; // ä¼ å…¥çš„å­—èŠ‚è¾“å…¥æµ

int implRead(char[] cbuf, int off, int end) throws IOException {

  	// cbuf åŒ…è£…
    CharBuffer cb = CharBuffer.wrap(cbuf, off, end - off);

    for (;;) {
    CoderResult cr = decoder.decode(bb, cb, eof); // â¤è§£ç å·¥ä½œ
    if (cr.isUnderflow()) {
        int n = readBytes(); // é¢„è¯»byteæ•°æ®åˆ° bb
        continue;
    }
}
  
private int readBytes() throws IOException {
    ...
    int n = in.read(bb.array(), bb.arrayOffset() + pos, rem); // è¯»å–æ•°æ®
    ...
}
```

çœ‹èµ·æ¥é‡ç‚¹åœ¨äºè¿™ä¸ª decoder.decode() æ–¹æ³•äº†ï¼ŒåŸå§‹çš„å­—èŠ‚æ•°æ®å·²ç»ç”±readBytes()å‡†å¤‡å¥½äº†ï¼Œæˆ‘ä»¬ç›´æ¥è¿›å» CharsetDecoder çš„ decode æ–¹æ³•çœ‹çœ‹

```java
public final CoderResult decode(ByteBuffer in, CharBuffer out,
                                boolean endOfInput)
{
	  ...
    for (;;) {
    CoderResult cr;
    try {
        cr = decodeLoop(in, out);
    }
    ...
}
```

è¿˜æœ‰ä¸€å±‚ï¼Œå†æ¬¡è·Ÿè¿› decodeLoop æ–¹æ³•ï¼ŒdecodeLoop æ˜¯æŠ½è±¡æ–¹æ³•ï¼Œå®ç°åœ¨ CharsetDecoder çš„å…·ä½“å®ç°ç±»é‡Œï¼Œè¿™é‡Œæ˜¯åœ¨ UTF_8ç±» çš„å†…éƒ¨ç±» Decoder é‡Œï¼Œè·Ÿè¿›å»çœ‹çœ‹ decode() -> decodeArrayLoop(src, dst) ï¼Œè¿™é‡Œå°±æ˜¯æœ€ç»ˆè¿›è¡Œè§£ç çš„åœ°æ–¹äº†

```java
private CoderResult decodeArrayLoop(ByteBuffer src,
                                    CharBuffer dst)
{
		byte[] sa = src.array(); // æº byte æ•°æ®
    char[] da = dst.array(); // ç›®æ ‡ char æ•°æ®
  	
    // ASCII only loop
    while (dp < dlASCII && sa[sp] >= 0) // å¦‚æœæ˜¯ ASCII å­—ç¬¦ï¼Œå°±ç›´æ¥è½¬æ¢å•ä¸ªå­—èŠ‚ä¸º char
        da[dp++] = (char) sa[sp++];
  
    ...
      
    // å¤šå­—èŠ‚å­—ç¬¦è½¬æ¢
    int b1 = sa[sp]; // byte1
    if (if ((b1 >> 4) == -2)){ // æˆªå–ä¸‰ä¸ªå­—èŠ‚ä¸€ä¸ªå­—ç¬¦çš„æƒ…å†µ
      	// 3 bytes, 16 bits: 1110xxxx 10xxxxxx 10xxxxxx
        int b2 = sa[sp + 1]; // byte2
			  int b3 = sa[sp + 2]; // byte3
        
        // â¤ å°†ä¸‰ä¸ªå­—èŠ‚æ‹¼è£…å¹¶å–å‡ºæœ‰æ•ˆå­—èŠ‚ä½
        char c = (char)
            ((b1 << 12) ^
             (b2 <<  6) ^
             (b3 ^
              (((byte) 0xE0 << 12) ^
               ((byte) 0x80 <<  6) ^
               ((byte) 0x80 <<  0))));

        // å°†è½¬æ¢çš„çš„ char æ”¾åˆ°è½¬æ¢åçš„ç›®æ ‡ char æ•°ç»„ä¸­
        da[dp++] = c;
    }
  
    ...
}
```

è¿˜æ˜¯ä»¥ä¸Šé¢çš„"é•¿"å­—ä¸ºä¾‹ä»‹ç»ä¸€ä¸‹æ ¸å¿ƒçš„è½¬æ¢æµç¨‹ï¼Œ"é•¿"å­—ç¼–ç åçš„ä¸‰ä¸ª byte çš„äºŒè¿›åˆ¶åˆ†åˆ«æ˜¯ b1: 1110 **1001**ï¼Œb2: 10**01 0101**ï¼Œb3: 10**11 1111**ï¼ŒåŠ ç²—éƒ¨åˆ†æ˜¯æœ‰æ•ˆä½ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¿™äº›æœ‰æ•ˆä½åˆå¹¶åˆ°ä¸€ä¸ª char çš„ä¸¤ä¸ªå­—èŠ‚ä¸­ï¼Œæˆ‘ä»¬å¤§è‡´éœ€è¦å‡ æ­¥ï¼Œ

1. åˆ†åˆ«å°†æœ‰æ•ˆä½æ”¾ç½®åˆ°æŒ‡å®šä½ç½®
2. å°†å¤šä½™çš„æ ‡å¿—ä½æ°å½“åœ°æŠ é™¤
3. åˆå¹¶ä¸‰ä¸ªå­—èŠ‚
4. è½¬åŒ–ä¸º charï¼Œ

ä¸‹é¢å°†ä¸Šé¢çš„ç®—æ³•ä»¥è¿™ä¸ªæ­¥å¥**ç­‰æ•ˆ**åˆ†è§£ä¸€ä¸‹

```java
ä¸‰å­—èŠ‚ 	               0x0000,0000 xxxx,xxxx xxxx,xxxx // xxxx ä¸ºæœ€ç»ˆçš„æœ‰æ•ˆæŒ‡å®šä½ç½®

1.ç§»åŠ¨

(b1 << 12)             0x0000,1110 1001,0000 0000,0000 // å°†b1æœ‰æ•ˆä½ç§»åŠ¨åˆ°åŒå­—èŠ‚çš„ 1-4 ä½
(b2 <<  6)             0x0000,0000 0010,0101 0100,0000 // å°†b2æœ‰æ•ˆä½ç§»åŠ¨åˆ°åŒå­—èŠ‚çš„ 5-10 ä½
b3                     0x0000,0000 0000,0000 1011,1111 // å°†b3æœ‰æ•ˆä½ç•™åœ¨åŒå­—èŠ‚çš„ 11-16 ä½

2.æŠ é™¤
#1(byte) 0xE0 << 12    0x0000,1110 0000,0000 0000,0000 // ç”¨äºæŠ é™¤b1æ ‡å¿—ä½çš„æ©ç 
#2(byte) 0x80 << 6     0x0000,0000 0010,0000 0000,0000 // ç”¨äºæŠ é™¤b2æ ‡å¿—ä½çš„æ©ç 
#3(byte) 0x80 << 0     0x0000,0000 0000,0000 1000,0000 // ç”¨äºæŠ é™¤b3æ ‡å¿—ä½çš„æ©ç 
  
b3 ^ #3                0x0000,0000 0000,0000 1011,1111
                       0x0000,0000 0000,0000 1000,0000
                       0x0000,0000 0000,0000 0011,1111 // å°†b3æ ‡å¿—ä½æŠ é™¤ï¼Œä¿ç•™11-16ä½æœ‰æ•ˆä½

b2 ^ #2                0x0000,0000 0010,0101 0100,0000
                       0x0000,0000 0010,0000 0000,0000
                       0x0000,0000 0000,0101 0100,0000 // å°†b2æ ‡å¿—ä½æŠ é™¤ï¼Œä¿ç•™5-10ä½æœ‰æ•ˆä½
  
b1 ^ #1                0x0000,1110 1001,0000 0000,0000
                       0x0000,1110 0000,0000 0000,0000
                       0x0000,0000 1001,0000 0000,0000 // å°†b1æ ‡å¿—ä½æŠ é™¤ï¼Œä¿ç•™1-4ä½æœ‰æ•ˆä½
3.åˆå¹¶  
b1 ^ b2 ^ b3           0x0000,0000 1001,0101 0111,1111 // å°†b1,b2,b3åˆå¹¶

4.è½¬åŒ–
(char)                           0x1001,0101 0111,1111 // 38271->'é•¿'

```

é€šè¿‡ä¸Šé¢çš„å‡ æ­¥ï¼Œå°±å¾—åˆ°äº†'é•¿'å­—ï¼Œå…¶ä½™ä¸¤å­—èŠ‚ã€å››å­—èŠ‚å­—ç¬¦çš„é“ç†ç›¸åŒã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†æ•´ä¸ªå­—èŠ‚æµåˆ°å­—ç¬¦æµçš„æ ¸å¿ƒæµç¨‹ InputStreamReader.read -> StreamDecoder.read -> CharsetDecoder.decodeã€‚æ‰€ä»¥ï¼Œæœ€åçœ‹èµ·æ¥ï¼Œå­—ç¬¦æµæœ€ç»ˆä¹Ÿæ˜¯å­—èŠ‚æµçš„ä¸€æ¬¡åŒ…è£…ï¼Œæœ¬è´¨å°±å°±æ˜¯ä¸€ç§å¯¹å­—èŠ‚æµçš„**è£…é¥°æµ**ï¼Œè€Œå› ä¸ºæä¾›çš„æ ¸å¿ƒæ¥å£ä¸åŒï¼Œå¹¶ä¸”å±è”½äº†å­—èŠ‚æµçš„æ¥å£ï¼Œæ‰€ä»¥æœ€ç»ˆå’Œå­—èŠ‚æµåˆ†æˆäº†ä¸¤å¥—æ¥å£ä½“ç³»



## Summary

â€‹	å› ä¸ºæ•°æ®çš„çŠ¶æ€ä¸åŒï¼Œé€‚åˆå­˜å‚¨æ•°æ®çš„ä»‹è´¨ä¹Ÿæœ‰æ‰€ä¸åŒï¼Œæ•°æ®åœ¨ä¸åŒä»‹è´¨é—´çš„ä¼ é€’çš„è¡Œä¸ºï¼Œå°±æ˜¯ IOã€‚åœ¨ Java ä¸­ï¼Œæ ¹æ®è¯»å–æ•°æ®çš„å•ä½ä¸åŒï¼ŒIO æµæœ‰ä¸¤å¥— API ä½“ç³»ï¼Œä¸€ä¸ªæ˜¯å­—èŠ‚æµï¼Œä¸€ä¸ªæ˜¯å­—ç¬¦æµã€‚å­—èŠ‚æµä¸»è¦ç”¨åœ¨éæ–‡æœ¬æ–‡ä»¶çš„è¯»å†™ï¼Œæˆ–è€…çº¯ ASCII å­—ç¬¦çš„æ–‡æœ¬æ–‡ä»¶ï¼Œ(å³ä¸éœ€è¦ç”±å¤šä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦çš„åœºæ™¯)ï¼Œäº¦æˆ–æ˜¯ä¸éœ€è¦å…³å¿ƒæ–‡ä»¶å†…å®¹çš„åœºæ™¯(æ¯”å¦‚æ–‡ä»¶æ•´ä½“ä¼ è¾“ç­‰)ï¼Œè€Œå­—ç¬¦æµä¸»è¦ç”¨åœ¨åŒ…å«é ASCII å­—ç¬¦çš„æ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œéœ€è¦è¯»å–æ–‡æœ¬å†…å®¹çš„åœºæ™¯ã€‚æ ¹æ®æµæ˜¯å¦æ˜¯çœŸæ­£çš„æ•°æ®æ¥æºï¼Œå¯ä»¥åˆ†ä¸ºè£…é¥°æµæˆ–è€…åŸå§‹æµã€‚è€Œæ¯ä¸€å¥— API ä½“ç³»(å­—ç¬¦æˆ–è€…å­—èŠ‚)éƒ½æœ‰æ ¹æ®å…¶è‡ªèº«å±æ€§æ‰€è¡ç”Ÿçš„è£…é¥°æµç­‰ï¼Œç”¨äºå¢å¼ºæµçš„åŠŸèƒ½æˆ–è€…æ€§èƒ½ï¼Œå­—ç¬¦æµæœ¬è´¨ä¹Ÿæ˜¯é€šè¿‡å­—èŠ‚æµè½¬æ¢è€Œæˆï¼Œä»å®ç°æ–¹å¼æ¥è¯´ä¹Ÿå¯ä»¥çœ‹æˆæ˜¯å¯¹å­—èŠ‚æµçš„ä¸€ç§è£…é¥°ã€‚



## Reference

1. [æ·±å…¥åˆ†æ Java I/O çš„å·¥ä½œæœºåˆ¶](https://developer.ibm.com/zh/articles/j-lo-javaio/)
2. [æ·±å…¥åˆ†æ Java ä¸­çš„ä¸­æ–‡ç¼–ç é—®é¢˜](https://developer.ibm.com/zh/articles/j-lo-chinesecoding/)
3. [Unicode table](https://unicode-table.com/cn/)